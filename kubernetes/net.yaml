apiVersion: networking.k8s.io/v1 
kind: Ingress 
metadata: 
  name: minimal-ingress 
  annotations: 
    kubernetes.io/ingress.class: nginx 
    nginx.ingress.kubernetes.io/rewrite-target: / 
    nginx.ingress.kubernetes.io/service-upstream: "true"
  namespace: squidgame
spec: 
  rules: 
  - host: 34.132.170.147.nip.io
    http: 
      paths: 
      - path: /
        pathType: Prefix 
        backend: 
           service: 
            name: rabbitmq-service
            port: 
              number: 3000
---
apiVersion: split.smi-spec.io/v1alpha1
kind: TrafficSplit
metadata:
  name: splitter
  namespace: squidgame
spec:
  service: rabbitmq-service
  backends:
  - service: rabbitmq-service
    weight: 100
#---
#kind: Endpoints
#apiVersion: v1 
#metadata:
#  name: back-rabbit
#subsets:
#  - addresses:
#    - ip: 35.184.26.14